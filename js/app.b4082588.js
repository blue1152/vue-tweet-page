(function(t){function e(e){for(var s,r,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);m&&m(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var i=a[r];0!==n[i]&&(s=!1)}s&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var s={},r={app:0},n={app:0},o=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-203f476d":"cf696140","chunk-2d0b3837":"d9e64d52","chunk-2d0b5a16":"e9f25379","chunk-2d0d7342":"43bced33","chunk-2d20ef3c":"dd4e6073","chunk-2d21d496":"7d67ef06","chunk-5f144b7e":"de6908fe","chunk-6cf925c7":"5778e405"}[t]+".js"}function c(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"chunk-203f476d":1,"chunk-5f144b7e":1,"chunk-6cf925c7":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var s="css/"+({}[t]||t)+"."+{"chunk-203f476d":"f789b7ee","chunk-2d0b3837":"31d6cfe0","chunk-2d0b5a16":"31d6cfe0","chunk-2d0d7342":"31d6cfe0","chunk-2d20ef3c":"31d6cfe0","chunk-2d21d496":"31d6cfe0","chunk-5f144b7e":"20523674","chunk-6cf925c7":"9d1489ce"}[t]+".css",n=c.p+s,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var l=o[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===s||u===n))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===s||u===n)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var s=e&&e.target&&e.target.src||n,o=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete r[t],m.parentNode.removeChild(m),a(o)},m.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){r[t]=0})));var s=n[t];if(0!==s)if(s)e.push(s[2]);else{var o=new Promise((function(e,a){s=n[t]=[e,a]}));e.push(s[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(m);var a=n[t];if(0!==a){if(a){var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",d.name="ChunkLoadError",d.type=s,d.request=r,a[1](d)}n[t]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=s,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(a,s,function(e){return t[e]}.bind(null,s));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/vue-tweet-page/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var m=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},"0cf0":function(t,e,a){"use strict";var s=a("b8ab"),r=a.n(s);r.a},"277b":function(t,e,a){},"2fa3":function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return u}));a("d3b7");var s=a("bc3a"),r=a.n(s),n=a("3d20"),o=a.n(n),i="https://twitter-backend-hj.herokuapp.com/api",c=r.a.create({baseURL:i});c.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e&&(t.headers["Authorization"]="Bearer ".concat(e)),t}),(function(t){return Promise.reject(t)}));var l=c,u=o.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},"386c":function(t,e,a){},"3e69":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{id:"UserHeader"}},[a("section",{attrs:{id:"upper-bar"}},[a("span",[a("router-link",{staticClass:"back-arrow",attrs:{to:"/tweets"}},[a("img",{attrs:{src:t.arrowImg,alt:"index"}})])],1),a("span",{staticClass:"user-name"},[a("div",[t._v(t._s(t.UserHeader.name))]),a("div",[t._v(t._s(t.UserHeader.tweetCounts)+" 推文")])])]),a("section",{attrs:{id:"user-info"}},[a("div",{staticClass:"cover-photo"},[a("img",{attrs:{src:t.UserHeader.user.cover,alt:"profile"}}),a("div",{staticClass:"user-photo-big"},[a("img",{attrs:{src:t.UserHeader.userAvatar,alt:"profile"}})])]),t._m(0),a("div",{staticClass:"user-name"},[a("div",[t._v(t._s(t.UserHeader.name))]),a("div",[t._v("@"+t._s(t.UserHeader.account))])]),a("div",{staticClass:"user-detail"},[t._v(" "+t._s(t.UserHeader.introduction)+" (這裡是introduction) ")]),a("div",{staticClass:"user-follow"},[a("span",[t._v(t._s(t.UserHeader.tweetFollowingCounts)+"個跟隨中")]),a("span",[t._v(t._s(t.UserHeader.tweetFollowerCounts)+"位跟隨者")])])]),a("div",{staticClass:"modal fade",attrs:{id:"userEdit",tabindex:"-1",role:"dialog","aria-labelledby":"userEditModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content user-edit-modal flex-column"},[a("form",[t._m(1),a("div",{staticClass:"modal-body col-12 m-0 p-0",staticStyle:{"box-sizing":"border-box"}},[a("div",{staticClass:"cover-wrapper"},[a("img",{staticClass:"cover-edit",attrs:{src:t.UserHeader.user.cover,alt:"cover"}})]),a("div",{staticClass:"user-photo-big"},[a("img",{staticClass:"photo-edit rounded-circle",attrs:{src:t.UserHeader.userAvatar,alt:"profile"}})]),t._m(2),t._m(3)])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-wrapper",attrs:{align:"right"}},[a("button",{staticClass:"setting-btn",attrs:{type:"button","data-toggle":"modal","data-target":"#userEdit"}},[t._v(" 編輯個人資料 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header col-12 d-flex align-items-center"},[a("div",{staticClass:"left-wrapper d-flex  align-items-center"},[a("a",{attrs:{href:"","data-dismiss":"modal","aria-label":"Close"}},[a("img",{attrs:{src:"https://i.imgur.com/wO030c5.png"}})]),a("div",{staticClass:"user-modal-title"},[t._v("編輯個人資料")])]),a("div",{staticClass:"right-wrapper"},[a("button",{staticClass:"post-btn",attrs:{type:"submit"}},[t._v("儲存")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column input-wrapper mt-3 mb-5"},[a("input",{staticClass:"text-name mx-auto",attrs:{type:"text",name:"text-name",maxlength:"50"}}),a("label",{staticClass:"text-name-label mx-auto",attrs:{for:"text-name"}},[t._v("名稱")]),a("small",{staticClass:"text-counter text-right mr-4"},[t._v("0/50")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column input-wrapper mb-5"},[a("input",{staticClass:"text-description mx-auto",attrs:{type:"text",name:"text-description",maxlength:"160"}}),a("label",{staticClass:"text-description-label mx-auto",attrs:{for:"text-description"}},[t._v("自我介紹")]),a("small",{staticClass:"text-counter text-right mr-4"},[t._v("0/160")])])}],n=(a("a4d3"),a("e01a"),a("b0c0"),a("2fa3")),o=a("6783"),i={name:"UserHeader",data:function(){return{userData:{account:"",name:"",email:"",password:"",passwordConfirm:"",introduction:"",avatar:"",cover:""},arrowImg:"./black_arrow.svg"}},props:{UserHeader:{type:Object,required:!0}},methods:{handleSubmitUser:function(){var t=this;this.description?o["a"].updateUser({userId:localStorage.getItem("id"),account:this.userData.account,name:this.userData.name,email:this.userData.email,password:this.userData.password,passwordConfirm:this.userData.passwordConfirm,introduction:this.userData.introduction,avatar:this.userData.avatar,cover:this.userData.cover}).then((function(e){console.log("response",e);var a=e.data;if("success"!==a.status)throw new Error(a.message);var s="";t.fetchTweets(s),t.description="有什麼新鮮事？"})).catch((function(e){t.description="",n["a"].fire({icon:"warning",title:"字數過長"}),console.log("error",e)})):n["a"].fire({icon:"warning",title:"記得要寫東西再送出喔~"})},fetchTweets:function(){var t=this;o["a"].getMainContent().then((function(e){console.log("response",e);var a=e.data;if("200"!=e.status||0==e.data.length)throw new Error(e.statusText);console.log(e.statusText),console.log(a),t.data=a})).catch((function(t){console.log("error",t)}))}}},c=i,l=(a("ce7a"),a("2877")),u=Object(l["a"])(c,s,r,!1,null,"5af546aa",null);e["a"]=u.exports},"4c31":function(t,e,a){},"4cce":function(t,e,a){"use strict";a("b0c0");var s=a("2fa3"),r=function(){return localStorage.getItem("token")};e["a"]={applyUser:function(t){var e=t.account,a=t.name,r=t.email,n=t.password,o=t.checkPassword;return s["b"].post("users",{account:e,name:a,email:r,password:n,checkPassword:o})},getCurrentUser:function(t){return s["b"].get("/users/".concat(t),{})},get:function(t){return s["b"].get("/users/".concat(t),{})},getFollowings:function(t){return s["b"].get("/users/".concat(t,"/followings"),{})},getFollowers:function(t){return s["b"].get("/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(r())}})},addFollowings:function(){return s["b"].get("/followships",{headers:{Authorization:"Bearer ".concat(r())}})},removeFollowings:function(t){return s["b"].get("followships/".concat(t),{})}}},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("main",{staticClass:"mt-5 bg-white",attrs:{role:"main"}},[a("router-view")],1)])},n=[],o=(a("4989"),a("ab8b"),{name:"App"}),i=o,c=(a("034f"),a("2877")),l=Object(c["a"])(i,r,n,!1,null,null,null),u=l.exports,d=(a("d3b7"),a("8c4f")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tweets"}},[a("div",{attrs:{id:"leftbar"}},[a("UserLeftbar",{attrs:{UserLeftbar:t.userData}})],1),a("div",{attrs:{id:"main-content"}},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"index-title"},[t._v("首頁")]),a("div",{staticClass:"index-line2"}),a("form",{staticClass:"user-input",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit()}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{cols:"50",rows:"5"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),a("button",{attrs:{type:"submit"}},[t._v("推文")])])]),a("div",{staticClass:"main-tweets"},[a("AllPosts",{attrs:{allpost:t.data}})],1)]),a("div",{attrs:{id:"rightbar"}},[a("FollowingBar")],1)])},p=[],f=(a("a4d3"),a("e01a"),a("2fa3")),v=a("e7ee"),h=a("6419"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"allposts"}},t._l(t.allpost,(function(e){return a("div",{key:e.id,staticClass:"post-wrapper"},[a("div",{staticClass:"user-img"},[a("img",{attrs:{src:e.userAvatar,alt:"profile"}})]),a("router-link",{attrs:{to:"/tweets/targettweet"}},[a("div",{staticClass:"user-tweets",attrs:{id:e.id},on:{click:function(a){return t.getRecentPost(e.id)}}},[a("div",{staticClass:"user-info-box"},[a("span",{staticClass:"user-name"},[t._v(t._s(e.userName))]),a("span",{staticClass:"user-account-name"},[t._v("@"+t._s(e.userAccount))]),a("span",{staticClass:"post-time"},[t._v("．"+t._s(e.tweetCreatedAt))])]),a("div",{staticClass:"user-text"},[t._v(t._s(e.description))]),a("div",{staticClass:"user-btns"},[a("span",{staticClass:"reply-btn"},[a("img",{attrs:{src:t.messageImg,alt:"reply"}}),t._v(t._s(e.replyConut))]),a("span",{staticClass:"like-btn",on:{click:function(a){return t.isLike(e.id,"like")}}},[a("img",{attrs:{src:t.likeImg,alt:"like"}}),t._v(t._s(e.likeConut))])])])])],1)})),0)},w=[],b=a("5530"),C=a("6783"),_={name:"allposts",data:function(){return{route:"/tweets/"+this.postId,postId:"",likeStatus:"",data:[],profileImg:"./photo_big.svg",messageImg:"./message.svg",likeImg:"./like.svg"}},props:{allpost:{type:Array,required:!0}},watch:{allpost:function(t){this.data=Object(b["a"])(Object(b["a"])({},this.data),t)}},methods:{getRecentPost:function(t){this.postId=t,localStorage.setItem("post",t)},fetchTweets:function(t){var e=this;C["a"].getMainContent(t).then((function(t){var a=t.data;if("200"!=t.status||0==t.data.length)throw new Error(t.statusText);e.data=a})).catch((function(t){console.log("error",t)}))},isLikes:function(t,e){var a=this;C["a"].editLikes({postId:t,like:e}).then((function(t){if("200"!=t.status)throw new Error(t.statusText);a.$router.push("/tweets")})).catch((function(t){console.log("error",t)}))}}},k=_,x=(a("b75f"),Object(c["a"])(k,g,w,!1,null,"7badd8cd",null)),y=x.exports,U=a("4cce"),I={name:"tweets",components:{UserLeftbar:v["a"],FollowingBar:h["a"],AllPosts:y},data:function(){return{userData:{},data:[],description:"有什麼新鮮事？"}},created:function(){var t="",e=localStorage.getItem("id");this.fetchTweets(t),this.fetchUser(e)},methods:{handleSubmit:function(){var t=this;this.description?this.description.length>140?f["a"].fire({icon:"warning",title:"最多只能輸入140字~"}):C["a"].createTweets({userId:localStorage.getItem("id"),description:this.description}).then((function(e){var a=e.data;if("success"!==a.status)throw new Error(a.message);var s="";t.fetchTweets(s),t.description="有什麼新鮮事？"})).catch((function(e){t.description="",f["a"].fire({icon:"warning",title:"字數過長"}),console.log("error",e)})):f["a"].fire({icon:"warning",title:"記得要寫東西再送出喔~"})},fetchUser:function(t){var e=this;U["a"].getCurrentUser(t).then((function(t){var a=t.data;if("200"!=t.status)throw new Error(t.statusText);e.userData=a})).catch((function(t){console.log("error",t)}))},fetchTweets:function(t){var e=this;C["a"].getMainContent(t).then((function(t){var a=t.data;if("200"!=t.status)throw new Error(t.statusText);e.data=a})).catch((function(t){console.log("error",t)}))}}},P=I,E=(a("5959"),Object(c["a"])(P,m,p,!1,null,"223dcbaf",null)),S=E.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"targettweet"}},[a("div",{attrs:{id:"leftbar"}},[a("UserLeftbar",{attrs:{UserLeftbar:t.userData}})],1),a("div",{attrs:{id:"main-content"}},[a("div",{staticClass:"content-header"},[a("span",[a("router-link",{staticClass:"back-arrow",attrs:{to:"/tweets"}},[a("img",{attrs:{src:t.arrowImg,alt:"index"}})])],1),a("div",{staticClass:"index-title"},[t._v("推文")])]),a("div",{staticClass:"main-tweets"},[a("div",{staticClass:"post-wrapper"},[a("div",{staticClass:"user-img"},[a("img",{attrs:{src:t.target.tweet.User.avatar,alt:"profile"}}),a("span",{staticClass:"user-name"},[t._v(t._s(t.target.tweet.User.name))]),a("span",{staticClass:"user-account-name"},[t._v("@"+t._s(t.target.tweet.User.account))])]),a("div",{staticClass:"user-tweets",attrs:{id:t.target.tweet.id}},[a("div",{staticClass:"user-text"},[t._v(" "+t._s(t.target.tweet.description)+" ")]),a("div",{staticClass:"post-time"},[t._v(t._s(t.target.tweet.createdAt))]),a("div",{staticClass:"tweet-line"}),a("div",{staticClass:"count"},[a("span",[t._v(t._s(t.target.replyConut)+"回覆")]),a("span",[t._v(t._s(t.target.likeConut)+"喜歡次數")])]),a("div",{staticClass:"tweet-line"}),a("div",{staticClass:"user-btns"},[a("span",{staticClass:"reply-btn"},[a("img",{attrs:{src:t.messageImg,alt:"reply"}})]),a("span",{staticClass:"like-btn",on:{click:function(e){return t.isLike(t.item.id,"like")}}},[a("img",{attrs:{src:t.likeImg,alt:"like"}})])]),a("div",{staticClass:"tweet-line"}),0!==t.replyCounts?a("div",t._l(t.target.tweet.Replies,(function(e){return a("div",{key:e.id,staticClass:"others-reply"},[a("div"),a("div",{staticClass:"others-content"},[a("div",[a("span",{staticClass:"user-name"},[t._v(t._s(e.userName))]),a("span",{staticClass:"user-account-name"},[t._v("@"+t._s(e.userAccount))]),a("span",{staticClass:"post-time"},[t._v("．"+t._s(e.tweetCreatedAt))])]),a("div",[t._v("回覆 @"+t._s(e.User.account))]),a("div",{staticClass:"other-descrition"},[t._v(t._s(e.comment))]),a("div",{staticClass:"others-reply-btn"},[a("span",{staticClass:"reply-btn"},[a("img",{attrs:{src:t.messageImg,alt:"reply"}})]),a("span",{staticClass:"like-btn",on:{click:function(a){return t.isLike(e.id,"like")}}},[a("img",{attrs:{src:t.likeImg,alt:"like"}})])])])])})),0):t._e()])])])]),a("div",{attrs:{id:"rightbar"}},[a("FollowingBar")],1)])},A=[],O={name:"targettweet",components:{UserLeftbar:v["a"],FollowingBar:h["a"]},data:function(){return{replyCounts:"",userData:{},target:{},arrowImg:"./black_arrow.svg",messageImg:"./message.svg",likeImg:"./like.svg"}},created:function(){var t=localStorage.getItem("post"),e=localStorage.getItem("id");this.fetchTweets(t),this.fetchUser(e)},methods:{handleSubmit:function(){var t=this;this.description?this.description.length>140?f["a"].fire({icon:"warning",title:"最多只能輸入140字~"}):C["a"].createTweets({userId:localStorage.getItem("id"),description:this.description}).then((function(e){var a=e.data;if("success"!==a.status)throw new Error(a.message);var s="";t.fetchTweets(s),t.description="有什麼新鮮事？"})).catch((function(e){t.description="",f["a"].fire({icon:"warning",title:"字數過長"}),console.log("error",e)})):f["a"].fire({icon:"warning",title:"記得要寫東西再送出喔~"})},fetchUser:function(t){var e=this;U["a"].getCurrentUser(t).then((function(t){var a=t.data;if("200"!=t.status)throw new Error(t.statusText);e.userData=a})).catch((function(t){console.log("error",t)}))},fetchTweets:function(t){var e=this;C["a"].getTarget(t).then((function(t){var a=t.data;if("200"!=t.status)throw new Error(t.statusText);console.log(t.statusText),e.target=a,console.log(a)})).catch((function(t){console.log("error",t)}))}}},j=O,$=(a("a638"),Object(c["a"])(j,T,A,!1,null,"19222092",null)),D=$.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user"}},[a("div",{attrs:{id:"leftbar"}},[a("UserLeftbar",{attrs:{UserLeftbar:t.userData}})],1),a("div",{attrs:{id:"main-content"}},[a("div",{staticClass:"header"},[a("UserHeader",{attrs:{UserHeader:t.userData}})],1),a("div",{staticClass:"main-container"},[a("UserPost",{attrs:{account:t.account}})],1)]),a("div",{attrs:{id:"rightbar"}},[a("FollowingBar")],1)])},N=[],H=a("3e69"),q=a("f949"),F={name:"user",components:{UserLeftbar:v["a"],FollowingBar:h["a"],UserHeader:H["a"],UserPost:q["default"]},data:function(){return{userData:{},account:[],reply:[]}},created:function(){var t="tweets",e=localStorage.getItem("id");this.fetchTweets(e,t),this.fetchUser(e)},methods:{fetchUser:function(t){var e=this;U["a"].getCurrentUser(t).then((function(t){var a=t.data;if("200"!=t.status)throw new Error(t.statusText);e.userData=a,console.log(a)})).catch((function(t){console.log("error",t)}))},fetchTweets:function(t,e){var a=this;C["a"].getTweets(t,e).then((function(t){var e=t.data;if("200"!=t.status||0==t.data.length)throw new Error(t.statusText);a.account=e})).catch((function(t){console.log("error",t)}))}}},B=F,M=(a("0cf0"),Object(c["a"])(B,L,N,!1,null,"ccf76706",null)),z=M.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container py-5"},[a("form",{staticClass:"w-100",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit()}}},[t._m(0),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"account"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",placeholder:"Account",autocomplete:"username",required:"",autofocus:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"Password",autocomplete:"current-password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" 登入 ")]),a("div",{staticClass:"text-center mb-3"},[a("p",[a("router-link",{attrs:{to:"/regist"}},[t._v("註冊Alpitter")])],1),a("p",[a("router-link",{attrs:{to:"/admin"}},[t._v("後台登入")])],1)])])])},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center mb-4"},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("登入Alphitter")])])}],K={logIn:function(t){var e=t.account,a=t.password;return f["b"].post("/login",{account:e,password:a})},userData:function(t){var e=t.account,a=t.password;return f["b"].post("/login",{account:e,password:a})}},G={data:function(){return{account:"",password:"",isProcessing:!1}},methods:{handleSubmit:function(){var t=this;this.account&&this.password?(this.isProcessing=!0,K.logIn({account:this.account,password:this.password}).then((function(e){console.log("response",e);var a=e.data;if("success"!==e.data.status)throw new Error(a.message);var s=String(a.token),r=String(a.user.id);localStorage.setItem("token",s),localStorage.setItem("id",r),t.$store.commit("setCurrentUser",a.user),t.$router.push("/tweets")})).catch((function(e){t.password="",t.isProcessing=!1,f["a"].fire({icon:"warning",title:"請確認您輸入了正確的帳號密碼"}),console.log("error",e)}))):f["a"].fire({icon:"warning",title:"請填入 帳號 和 密碼"})}}},Q=G,V=Object(c["a"])(Q,R,J,!1,null,null,null),W=V.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container py-5"},[a("form",{staticClass:"w-100",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit()}}},[t._m(0),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"account"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",required:"",autofocus:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"Password",autocomplete:"current-password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit"}},[t._v("登入")]),a("div",{staticClass:"text-center mb-3"},[a("p",[a("router-link",{attrs:{to:"/"}},[t._v("前台登入")])],1)])])])},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center mb-4"},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("後台登入")])])}],Z={data:function(){return{account:"",password:""}},methods:{handleSubmit:function(){var t=JSON.stringify({user:{account:this.account,password:this.password}});this.$router.push("/tweets"),this.$store.commit("setCurrentUser",t.user),this.account&&this.password||f["a"].fire({icon:"warning",title:"請填入 帳號 和 密碼"})}}},tt=Z,et=Object(c["a"])(tt,X,Y,!1,null,null,null),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container py-5"},[a("form",{staticClass:"w-100",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleApplyUser()}}},[t._m(0),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"name"}},[t._v("帳號")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",name:"account",type:"text",required:"",autofocus:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"name"}},[t._v("名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",name:"name",type:"text",placeholder:"name",autocomplete:"username",required:"",autofocus:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-2"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",name:"email",type:"email",placeholder:"email",autocomplete:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"password"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",name:"password",type:"password",placeholder:"Password",autocomplete:"new-password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"form-label-group mb-3"},[a("label",{attrs:{for:"passwordConfirm"}},[t._v("密碼確認")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkPassword,expression:"checkPassword"}],staticClass:"form-control",attrs:{id:"checkPassword",name:"checkPassword",type:"password",placeholder:"checkPassword",autocomplete:"checkPassword",required:""},domProps:{value:t.checkPassword},on:{input:function(e){e.target.composing||(t.checkPassword=e.target.value)}}})]),a("button",{staticClass:"btn btn-lg btn-primary btn-block mb-3",attrs:{type:"submit"}},[t._v("註冊")]),a("div",{staticClass:"text-center mb-3"},[a("p",[a("router-link",{attrs:{to:"/"}},[t._v("取消")])],1)])])])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center mb-4"},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("建立你的帳號")])])}],nt=(a("b0c0"),{data:function(){return{account:"",name:"",email:"",password:"",checkPassword:""}},methods:{handleApplyUser:function(){var t=this;this.password===this.checkPassword?this.account&&this.name&&this.email&&this.password&&this.checkPassword?U["a"].applyUser({account:this.account,name:this.name,email:this.email,password:this.password,checkPassword:this.checkPassword}).then((function(e){console.log("response",e);var a=e.data;if("success"!==a.status)throw new Error(a.message);t.$router.push("/login"),f["a"].fire({icon:"success",title:"註冊成功, 請登入"})})).catch((function(t){f["a"].fire({icon:"warning",title:"註冊失敗"}),console.log("error",t)})):f["a"].fire({icon:"warning",title:"欄位不能有空白"}):f["a"].fire({icon:"warning",title:"密碼輸入不一致"})}}}),ot=nt,it=Object(c["a"])(ot,st,rt,!1,null,null,null),ct=it.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v(" 404 Page Not Found ")])},ut=[],dt={},mt=Object(c["a"])(dt,lt,ut,!1,null,null,null),pt=mt.exports,ft=(a("96cf"),a("1da1")),vt=a("2f62");s["a"].use(vt["a"]);var ht=new vt["a"].Store({state:{currentUser:{account:"",name:"",id:-1,email:"",role:""},isAuthenticated:!1},mutations:{setCurrentUser:function(t,e){t.currentUser=Object(b["a"])(Object(b["a"])({},t.currentUser),e),t.isAuthenticated=!0},revokeAuthentication:function(t){t.currentUser={},t.isAuthenticated=!1,localStorage.removeItem("token")}},actions:{fetchCurrentUser:function(t){return Object(ft["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,e.next=4,U["a"].getCurrentUser(localStorage.getItem("id"));case 4:if(s=e.sent,console.log(s.data.user),"error"!==s.statusText){e.next=8;break}throw new Error(s);case 8:r=s.data.account,n=s.data.name,o=String(s.data.user.id),i=s.data.email,c=s.data.user.role,a("setCurrentUser",{account:r,name:n,id:o,email:i,role:c}),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))()}},modules:{}});s["a"].use(d["a"]);var gt=[{path:"/",name:"root",redirect:"/login"},{path:"/tweets",name:"tweets",component:S},{path:"/tweets/targettweet",name:"targettweet",component:D},{path:"/user",name:"user",component:z},{path:"/login",name:"log-in",component:W},{path:"/admin",name:"admin",component:at},{path:"/regist",name:"regist",component:ct},{path:"/tweets/user/userpost",name:"userpost",component:function(){return Promise.resolve().then(a.bind(null,"f949"))}},{path:"/tweets/user/userreply",name:"userreply",component:function(){return a.e("chunk-6cf925c7").then(a.bind(null,"5031"))}},{path:"/tweets/user/userlikes",name:"userlikes",component:function(){return a.e("chunk-203f476d").then(a.bind(null,"43a0"))}},{path:"/tweets/user/setting",name:"setting",component:function(){return a.e("chunk-5f144b7e").then(a.bind(null,"27c5"))}},{path:"/tweets/user/followers",name:"followers",component:function(){return a.e("chunk-2d21d496").then(a.bind(null,"d13f"))}},{path:"/tweets/user/following",name:"following",component:function(){return a.e("chunk-2d0d7342").then(a.bind(null,"768e"))}},{path:"/tweets/otheruser",name:"otheruser",component:function(){return a.e("chunk-2d0b3837").then(a.bind(null,"2960"))}},{path:"/admin/postslist",name:"postslist",component:function(){return a.e("chunk-2d20ef3c").then(a.bind(null,"b20f"))}},{path:"/admin/userslist",name:"userslist",component:function(){return a.e("chunk-2d0b5a16").then(a.bind(null,"1a5e"))}},{path:"*",name:"not-found",component:pt}],wt=new d["a"]({linkExactActiveClass:"active",routes:gt});wt.beforeEach((function(t,e,a){ht.dispatch("fetchCurrentUser"),a()}));var bt=wt;s["a"].config.productionTip=!1,new s["a"]({router:bt,store:ht,render:function(t){return t(u)}}).$mount("#app")},"58df":function(t,e,a){},5959:function(t,e,a){"use strict";var s=a("c105"),r=a.n(s);r.a},"5ff6":function(t,e,a){},"61a8":function(t,e,a){},6419:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rightbar-wrapper"},[a("div",{staticClass:"follow-title"},[t._v("跟隨誰")]),a("div",{staticClass:"follow-list"},[a("div",{staticClass:"user-data"},[a("div",{staticClass:"user-account"},[a("img",{attrs:{src:t.imgSrc,alt:"photo"}}),t._m(0)]),a("div",{staticClass:"follow-btn active"},[t._v("正在跟隨")])]),a("div",{staticClass:"user-data"},[a("div",{staticClass:"user-account"},[a("img",{attrs:{src:t.imgSrc,alt:"photo"}}),t._m(1)]),a("div",{staticClass:"follow-btn"},[t._v("跟隨")])])]),a("div",{staticClass:"more-btn"},[t._v("顯示更多")])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"user-name"},[t._v("Pizza Hut")]),a("div",{staticClass:"account-name"},[t._v("@pizzahut")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("div",{staticClass:"user-name"},[t._v("McDonald's")]),a("div",{staticClass:"account-name"},[t._v("@McDonalds")])])}],n=a("4cce"),o={name:"rightbar-wrapper",data:function(){return{data:[],imgSrc:"./Photo.svg"}},created:function(){var t=String(localStorage.getItem("id"));this.fetchTweets(t)},methods:{fetchTweets:function(t){var e=this;n["a"].getFollowings(t).then((function(t){console.log("response",t);var a=t.data;if("200"!=t.status||0==t.data.length)throw new Error(t.statusText);console.log(t.statusText),console.log(a),e.data=a})).catch((function(t){console.log("error",t)}))}}},i=o,c=(a("f831"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,null,null);e["a"]=l.exports},6783:function(t,e,a){"use strict";a("a4d3"),a("e01a"),a("99af"),a("b0c0");var s=a("2fa3");e["a"]={editLikes:function(t,e){return s["b"].post("/tweets/".concat(t,"/").concat(e),{})},getMainContent:function(t){return s["b"].get("/tweets/".concat(t),{})},getTarget:function(t){return s["b"].get("/tweets/".concat(t),{})},addLikes:function(t){return s["b"].get("/tweets/".concat(t,"/like"),{})},removeLikes:function(t){return s["b"].get("/tweets/".concat(t,"/unlike"),{})},createTweets:function(t){var e=t.userId,a=t.description;return s["b"].post("/tweets",{userId:e,description:a})},getTweets:function(t,e){return s["b"].get("/users/".concat(t,"/").concat(e),{})},updateUser:function(t){var e=t.userId,a=t.account,r=t.name,n=t.email,o=t.password,i=t.passwordConfirm,c=t.introduction,l=t.avatar,u=t.cover;return s["b"].put("/users/".concat(e),{userId:e,account:a,name:r,email:n,password:o,passwordConfirm:i,introduction:c,avatar:l,cover:u})}}},"71b7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user-tabs"}},[a("div",{staticClass:"user-tabs-link"},[a("router-link",{attrs:{to:"/user"}},[t._v(" 推文 ")])],1),a("div",{staticClass:"user-tabs-link"},[a("router-link",{attrs:{to:"/tweets/user/userreply"}},[t._v(" 推文與回覆 ")])],1),a("div",{staticClass:"user-tabs-link"},[a("router-link",{attrs:{to:"/tweets/user/userlikes"}},[t._v(" 喜歡的內容 ")])],1)])},r=[],n=a("5530"),o=a("2f62"),i={name:"user-tabs",methods:{fetchUser:function(){}},computed:Object(n["a"])({},Object(o["b"])(["currentUser"]))},c=i,l=(a("86e3"),a("2877")),u=Object(l["a"])(c,s,r,!1,null,null,null);e["a"]=u.exports},"85ec":function(t,e,a){},"86e3":function(t,e,a){"use strict";var s=a("61a8"),r=a.n(s);r.a},"8c1f":function(t,e,a){"use strict";var s=a("58df"),r=a.n(s);r.a},a638:function(t,e,a){"use strict";var s=a("277b"),r=a.n(s);r.a},b75f:function(t,e,a){"use strict";var s=a("cfe9"),r=a.n(s);r.a},b8ab:function(t,e,a){},c105:function(t,e,a){},ce7a:function(t,e,a){"use strict";var s=a("386c"),r=a.n(s);r.a},cfe9:function(t,e,a){},e7ee:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"leftbar-wrapper"},[a("div",{staticClass:"alpha-logo"},[a("img",{attrs:{src:t.imgSrc,alt:"ac_logo"}})]),a("div",{staticClass:"nav-bar"},["user"==t.currentUser.role?a("ul",[a("li",[a("router-link",{attrs:{to:"/tweets"}},[a("img",{attrs:{src:t.homeImg,alt:"index"}}),t._v("首頁 ")])],1),a("li",[a("router-link",{attrs:{to:"/user"}},[a("img",{attrs:{src:t.userImg,alt:"user"}}),t._v("個人資料 ")])],1),a("li",[a("router-link",{attrs:{to:"/tweets/user/setting"}},[a("img",{attrs:{src:t.settingImg,alt:"setting"}}),t._v("設定 ")])],1)]):t._e(),"admin"==t.currentUser.role?a("ul",[a("li",[a("img",{attrs:{src:t.homeImg,alt:"all-tweet-list"}}),t._v("推文清單")]),a("li",[a("img",{attrs:{src:t.userImg,alt:"all-user-list"}}),t._v("使用者列表")])]):t._e()]),a("div",{staticClass:"post-btn",on:{click:function(e){return t.show()}}},[t._v("推文")]),"user"==t.currentUser.role?a("div",{staticClass:"log-out",on:{click:t.logout}},[a("img",{attrs:{src:t.logoutImg,alt:"setting"}}),t._v("登出 ")]):t._e(),a("modal",{attrs:{name:"tweet-modal"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("form",{staticClass:"modal-content",on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.handleSubmit()}}},[a("div",{staticClass:"modal-header col-12"},[a("a",{attrs:{href:"","data-dismiss":"modal","aria-label":"Close"}},[a("img",{attrs:{src:t.UserLeftbar.userCover}})])]),a("div",{staticClass:"modal-body col-12 d-flex"},[a("div",{staticClass:"photo-wrapper"},[a("img",{staticClass:"photo rounded-circle",attrs:{src:t.UserLeftbar.userAvatar,alt:""}})]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"tweet-content ml-3",attrs:{cols:"50",rows:"5"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"post-btn",attrs:{type:"submit"},on:{click:function(e){return t.hide()}}},[t._v(" 推文 ")])])])])])],1)},r=[],n=(a("a4d3"),a("e01a"),a("5530")),o=a("2b0e"),i=a("1881"),c=a.n(i),l=a("2f62"),u=a("2fa3"),d=a("6783"),m=a("4cce");o["a"].use(c.a);var p={name:"leftbar-wrapper",data:function(){return{data:[],description:"有什麼新鮮事？",profileImg:"./photo_big.svg",coverImg:"./cover.svg",imgSrc:"./ac_logo.svg",homeImg:"./icon_index.svg",userImg:"./icon_user.svg",settingImg:"./icon_cog.svg",logoutImg:"./icon_logout.svg"}},props:{UserLeftbar:{type:Object,required:!0}},methods:{show:function(){this.$modal.show("tweet-modal")},hide:function(){this.$modal.hide("tweet-modal")},logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")},handleSubmit:function(){var t=this;this.description?d["a"].createTweets({userId:localStorage.getItem("id"),description:this.description}).then((function(e){console.log("response",e);var a=e.data;if("success"!==a.status)throw new Error(a.message);t.description="有什麼新鮮事？",t.$router.go(0)})).catch((function(e){t.description="",console.log("error",e)})):u["a"].fire({icon:"warning",title:"記得要寫東西再送出喔~"})},fetchUser:function(t){var e=this;m["a"].getCurrentUser(t).then((function(t){var a=t.data;if("200"!=t.status||0==t.data.length)throw new Error(t.statusText);console.colg(a),e.userData=a})).catch((function(t){console.log("error",t)}))},fetchTweets:function(t){var e=this;d["a"].getMainContent(t).then((function(t){var a=t.data;if("200"!=t.status||0==t.data.length)throw new Error(t.statusText);e.data=a})).catch((function(t){console.log("error",t)}))}},computed:Object(n["a"])({},Object(l["b"])(["currentUser"]))},f=p,v=(a("f898"),a("2877")),h=Object(v["a"])(f,s,r,!1,null,"31933590",null);e["a"]=h.exports},f831:function(t,e,a){"use strict";var s=a("4c31"),r=a.n(s);r.a},f898:function(t,e,a){"use strict";var s=a("5ff6"),r=a.n(s);r.a},f949:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userpost"}},[a("div",[a("UserTabs")],1),a("hr"),a("div",{staticClass:"user-tweet"},t._l(t.account,(function(e){return a("div",{key:e.id,staticClass:"tweet-body"},[a("div",{staticClass:"user-photo"},[a("img",{attrs:{src:e.userAvatar,alt:"profile"}})]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"user-name"},[a("span",[a("a",{attrs:{href:"#"}},[t._v(t._s(e.userName))])]),a("span",{staticStyle:{"padding-left":"10px"}},[t._v("@"+t._s(e.userAccount))]),a("span",{staticStyle:{"padding-left":"10px"}},[t._v(t._s(e.tweetCreatedAt))])]),a("div",{staticClass:"user-text"},[a("p",[t._v(t._s(e.description))])]),a("div",{staticClass:"user-btns"},[a("span",{staticClass:"reply-btn"},[a("img",{attrs:{src:t.messageImg,alt:"reply"}}),t._v(t._s(e.replyConut)+" ")]),a("span",{staticClass:"like-btn"},[a("img",{attrs:{src:t.likeImg,alt:"like"}}),t._v(t._s(e.likeConut)+" ")])])])])})),0)])},r=[],n=(a("a4d3"),a("e01a"),a("d81d"),a("b0c0"),a("71b7")),o={name:"userpost",components:{UserTabs:n["a"]},data:function(){return{data:[],messageImg:"./message.svg",likeImg:"./like.svg"}},props:{account:{type:Array,required:!0}},created:function(){},methods:{dataFix:function(){var t=this,e=t.account.user.Tweets,a=t.account.user.name,s=t.account.user.avatar,r=t.account.account,n=e.map((function(t){var e={};return e.name=a,e.account=r,e.id=t.id,e.description=t.description,e.createdAt=t.createdAt,e.updatedAt=t.updatedAt,e.avatar=s,e}));return console.log(n),t.data=n}}},i=o,c=(a("8c1f"),a("2877")),l=Object(c["a"])(i,s,r,!1,null,"0c18cede",null);e["default"]=l.exports}});
//# sourceMappingURL=app.b4082588.js.map